<!DOCTYPE html>
<html lang="en" ng-app='testApp'>
<head>
	<meta charset="UTF-8">
	<base href="/">
	<title>FUSD Speaking Indicator System</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"></link>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.12/angular.min.js"></script>
	<script src="https://code.angularjs.org/1.3.12/angular-route.min.js"></script>
	<script src="https://code.angularjs.org/1.3.12/angular-resource.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
	<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script type='text/javascript' src='js/app.js'></script>
	<script type='text/javascript' src='js/speak.js'></script>
	<script>
		
		var authorized = false;
		$(document).keypress(function(event){
		 
			var keycode = (event.keyCode ? event.keyCode : event.which);
			if(keycode == '13' && authorized){
				console.log('You pressed a "enter" key in somewhere');
				$('#add').click();
			}
		 
		});

		$(document).ready(function(e) {
			$('#myModal').on('shown.bs.modal', function() {
				authorized = false;
			});
			$('#myModal').on('hide.bs.modal', function() {
				authorized = true;
			});
			$('#myModal').modal('show');
			
		});

		function handlePW() {
			var pw = document.getElementById('password').value;
			console.log(pw);
			if(pw === "password") { //fetch from some backend store of channel:pw entries
				$('#myModal').modal('hide');
			}
			else {
				$('#incpw').fadeIn();
				$('#incpw').removeClass('hidden');
				setTimeout(function() {
					$('#incpw').fadeOut();
				}, 5000);
			}
			
		}
	</script>
</head>
<body ng-controller='TestCtrl'>

	<div ng-view></div>
	<div class="modal fade" id='myModal' data-backdrop="static" data-keyboard="false" role="dialog">
	  <div class="modal-dialog modal-lg">
	    <div class="modal-content">
	    	<div class="modal-header">
                <h3 class='text-center'>Enter password</h3>
            </div>
            <div class="modal-body">
            	<div class="container-fluid">
            		<div class="row">
            			<div class="col-md-8 col-md-offset-4">
		            		<form class="form-inline" onSubmit="return handlePW()">
			            		<input type="password" id='password' placeholder="Password" name='password' class="form-control">
								<input type="submit" class="btn btn-primary" value="Enter" id='enter'></input>
			            	</form>
		            	</div>
            		</div>
            		<div class="row">
			    		<div class="alert alert-danger alert-dismissible hidden" id='incpw' role="alert" style='display: block; margin: auto; margin-top:1%'>
			    			<div class="text-center">
			    				<strong>Incorrect password.</strong> Please try again.
			    			</div>
			    		</div>
            		</div>
            	</div>
            </div>
	    	<div class="modal-footer">
	        	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      	</div>
	    </div>
	  </div>
	</div>

</body>
</html>
